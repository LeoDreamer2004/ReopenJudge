#!/bin/bash

echo '
==================================================================================================================

  /$$$$$$$  /$$$$$$$$  /$$$$$$  /$$$$$$$  /$$$$$$$$ /$$   /$$    /$$$$$ /$$   /$$ /$$$$$$$   /$$$$$$  /$$$$$$$$
  | $$__  $$| $$_____/ /$$__  $$| $$__  $$| $$_____/| $$$ | $$   |__  $$| $$  | $$| $$__  $$ /$$__  $$| $$_____/
  | $$  \ $$| $$      | $$  \ $$| $$  \ $$| $$      | $$$$| $$      | $$| $$  | $$| $$  \ $$| $$  \__/| $$      
  | $$$$$$$/| $$$$$   | $$  | $$| $$$$$$$/| $$$$$   | $$ $$ $$      | $$| $$  | $$| $$  | $$| $$ /$$$$| $$$$$   
  | $$__  $$| $$__/   | $$  | $$| $$____/ | $$__/   | $$  $$$$ /$$  | $$| $$  | $$| $$  | $$| $$|_  $$| $$__/   
  | $$  \ $$| $$      | $$  | $$| $$      | $$      | $$\  $$$| $$  | $$| $$  | $$| $$  | $$| $$  \ $$| $$      
  | $$  | $$| $$$$$$$$|  $$$$$$/| $$      | $$$$$$$$| $$ \  $$|  $$$$$$/|  $$$$$$/| $$$$$$$/|  $$$$$$/| $$$$$$$$
  |__/  |__/|________/ \______/ |__/      |________/|__/  \__/ \______/  \______/ |_______/  \______/ |________/

==================================================================================================================
'

# backend
cd core
python manage.py runserver &
server_pid=$!
cd ..

# frontend
cd website
npm run dev &
client_pid=$!
cd ..

echo -e "\e[33m\e[1mBackend running on $server_pid\e[0m"
echo -e "\e[33m\e[1mFrontend running on $client_pid\e[0m"

# capture ctrl+c
cleanup() {
    echo -e "\e[33m\e[1mStopping server...\e[0m"
    kill $server_pid $client_pid
    exit 0
}

trap cleanup SIGINT

echo -e "\e[33m\e[1mServer starting... Press Ctrl+C to stop\e[0m"

while true; do
    sleep 1
done